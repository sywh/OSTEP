# 第4章 抽象：进程
## 要点
- 进程/机器状态/进程API/**程序如何转化为进程**/进程状态/进程数据结构/进程列表/进程控制块
- 虚拟化CPU/时分共享/空分共享/机制和策略/CPU利用率
## 知识点
- 进程：操作系统为正在运行的程序提供的抽象，就是所谓的进程
- 机器状态：指程序在运行时可以读取或更新的内容，包括进程可以访问的内存（称为地址空间），寄存器（包括特殊寄存器，如程序计数器、栈指针和帧指针），持久存储设备（包括当前打开的文件列表）
- 进程API：包括创建/销毁/等待/暂停/恢复/状态等
- 进程状态：运行/就绪/阻塞/僵尸
- CPU利用率：通过保持CPU繁忙可提高CPU利用率，如在进程发出I/O时进行上下文切换，运行其他进程
# 第5章 插叙：进程API
## 要点
- fork()/exec()/wait()
- 进程描述符(PID)/shell重定向和管道
## 知识点
- 进程API
  - fork(): 创建子进程，子进程和父进程都从fork()系统调用处返回
  - exec()：让子进程执行与父进程不同的程序
  - wait(): 等待进程执行完毕，如父进程执行wait()，延迟自己的执行，直到子进程执行完毕
- PID: PID是进程的标识符，如果要操作某个进程，就需要通过PID来指明
# 第6章 机制：受限直接运行
## 要点
- 受限直接执行/进程列表/受限操作
- 用户模式/内核模式/陷入内核/从陷阱返回/陷阱表/系统调用/内核栈/进程结构
- 协作调度系统/非协作调度系统/时钟中断
- 上下文切换/重启
## 知识点
- 受限操作：向磁盘发出I/O请求，获得更多系统资源（如CPU或内存），访问文件系统
- 用户模式：一种**处理器模式**，在用户模式下运行时，进程不能发出I/O请求，这样做会导致处理器引发异常，操作系统可能会终止进程
- 内核模式：操作系统（或内核）就以这种模式运行，可以执行特权操作，如发出I/O请求和执行所有类型的受限指令
- 系统调用：允许内核小心地向用户程序暴露某些关键功能。要执行系统调用，程序必须执行特殊的陷阱(trap)指令。该指令同时跳入内核并将特权级别提升至内核模式
- 陷阱表：内核通过在启动时设置陷阱表，来告诉硬件在发生某些异常事件时要运行哪些代码。操作系统通常通过某种特殊的指令，通知硬件这些陷阱处理程序的位置。一旦硬件被通知，它就会记住这些处理程序的位置，直到下一次重新启动机器，并且硬件知道在发生系统调用和其它异常事件时要做什么（即跳转到哪段代码）
- 内核栈：内核栈便于操作系统发出从陷阱返回指令时，能够正确返回用户程序。每个进程都有一个内核栈，在进入内核和离开内核时，寄存器（包括通用寄存器和程序计数器）分别被保存和恢复
- 协作调度系统：OS通过等待系统调用，或某种非法操作发生，从而重新获得CPU的控制权
- 非协作调度系统：产生中断时，当前正在运行的进程停止，操作系统中预先配置的中断处理程序会运行。此时，操作系统重新获得CPU控制权
# 第7章 进程调度：介绍
## 要点
- 工作负载/工作负载假设/（非）抢占式调度程序/IO负载
- 调度指标：周转时间/响应时间/性能和公平
- 调度策略：先进先出(FIFO)/最短任务优先(SJF)/最短完成时间优先(STCF)/轮转(RR)
- 护航效应/摊销/重叠
## 知识点
- 工作负载：运行中的进程
- RR:
  - 时间片长度对于RR至关重要。越短，RR在响应时间上的表现越好，但时间片太短，上下文切换的成本将影响整体性能。系统设计者需要权衡时间片的长度，使其足够长，以便摊销上下文切换成本，而又不会使系统不及时响应
  - 时间片长度必须是时钟中断周期的倍数
  - 如果周转时间是我们的指标，那么RR确实是最糟糕的策略之一
# 第8章 调度：多级反馈队列
## 要点
- 多级反馈队列/用历史经验预测未来/队列/优先级/不同队列时间片长度不同
- 工作负载类型/饥饿问题/愚弄调度程序/一个程序可能在不同时间表现不同
- 巫毒常量/用户建议
## 知识点
- 工作负载类型：既有运行时间很短、频繁放弃CPU的**交互型工作**，也有需要很多CPU时间、响应时间却不重要的长时间**计算密集型工作**。CPU密集型工作一般都在最低优先级队列执行
# 第9章 调度：比例份额
## 要点
- 彩票调度/彩票数/随机性/彩票货币/彩票转让/彩票通胀/不公平指标U
- 步长调度/步长/行程值/调度周期
## 知识点
- 随机性的优点
  - 随机方法尝尝可以避免奇怪的边角情况，避免最差情况
  - 随机方法很轻量，几乎不需要记录任何状态
  - 随机方法很快，对运行速度要求高的场景非常适用
- 不公平指标U：将两个工作完成时间相除。当工作执行时间很短时，平均不公平度非常糟糕。只有当工作执行非常多的时间片时，彩票调度算法才能得到期望的结果
- 步长：每个工作都有自己的步长，这个值与票数值成反比，通过用一个大数分别除以每个工作的票数来获得每个进程的步长
# 第10章 多处理器调度
# 第13章 抽象：地址空间
## 要点
- 虚拟化内存/地址空间/隔离原则
- 虚拟内存的目标：透明/效率/保护
## 知识点
- 虚拟化内存：操作系统在单一的物理内存上，为多个运行的进程构建一个私有的、可能很大的地址空间
- 地址空间：物理内存的抽象，是运行的程序看到的系统中的内存。一个进程的地址空间包含运行的程序的所有状态，包括程序的代码，栈（保存当前的函数调用信息、分配空间给局部变量、传递参数和函数返回值）和堆（管理动态分配的、用户管理的内存）
# 第14章 插叙：内存操作API
# 第15章 机制：地址转换
# 第16章 分段
# 第17章 空闲空间管理
# 第18章 分页：介绍
# 第19章 分页：快速地址转换（TLB）
# 第20章 分页：较小的表
# 第21章 超越物理内存：机制
# 第22章 超越物理内存：策略
# 第23章 VAX/VMS虚拟内存系统
# 第26章 并发：介绍
# 第27章 插叙：线程API
# 第28章 锁
# 第29章 基于锁的并发数据结构
# 第30章 条件变量
# 第31章 信号量
# 第32章 常见并发问题
# 第33章 基于事件的并发
# 第36章 I/O设备
# 第37章 磁盘驱动器
# 第38章 廉价冗余磁盘阵列（RAID）
# 第39章 插叙：文件和目录
# 第40章 文件系统实现
# 第41章 局部性和快速文件系统
# 第42章 崩溃一致性：FSCK和日志
# 第43章 日志结构文件系统
# 第44章 数据完整性和保护
# 第47章 分布式系统
# 第48章 Sun的网络文件系统（NFS）
# 第49章 Andrew文件系统（AFS）